# MAMA Registration Bot

Система регистрации участников с использованием Telegram Bot API.

## Установка и запуск

### 1. Требования
- Python 3.10+
- Pip

### 2. Установка зависимостей

```bash
cd mama_reg_bots
python -m venv venv
.\venv\Scripts\Activate.ps1  # Windows PowerShell
pip install -r requirements.txt
```

### 3. Запуск бота

```bash
.\venv\Scripts\python main.py
```

## Функциональность

### Команды бота
- `/start` - Начать регистрацию
- `/getfile` - Скачать ZIP архив всех данных

### Процесс регистрации

1. **Выбор куратора** - Пользователь выбирает кто его пригласил
2. **ФИО** - Полное имя участника
3. **ИНН** - 14 цифр ИНН
4. **Телефон** - Номер телефона (с кнопкой отправки контакта)
5. **Паспорт** - Фото лицевой стороны
6. **Паспорт** - Фото обратной стороны
7. **Диплом** - Фото диплома в хорошем качестве
8. **Просмотр** - Проверка данных перед подтверждением
9. **Подтверждение** - Финальная отправка

### Структура проекта

```
mama_reg_bots/
├── config/
│   ├── settings.py          # Конфигурация
│   ├── counters.json        # Счетчики участников
│   └── __init__.py
├── handlers/
│   ├── registration.py      # Обработчики регистрации
│   └── __init__.py
├── utils/
│   ├── file_manager.py      # Работа с файлами
│   └── __init__.py
├── data/                    # Папка с данными пользователей
│   ├── Айгерим/
│   ├── Бермет/
│   ├── Майрам/
│   ├── Жайна/
│   └── Чолпон/
├── main.py                  # Главный файл бота
├── requirements.txt         # Зависимости
└── .gitignore
```

### Структура данных пользователя

Для каждого пользователя создается папка:
```
data/Куратор/ФИО_Пользователя/
├── passport_front.jpg       # Лицевая сторона паспорта
├── passport_back.jpg        # Обратная сторона паспорта
├── diploma.jpg              # Диплом
└── info.txt                 # Информация участника
```

### Счетчики

Счетчики хранятся в `config/counters.json`:
- Общий счетчик всех участников
- Отдельный счетчик для каждого куратора

## Telegram Groups

- **Общая группа**: Все регистрации
- **Группы кураторов**: Регистрации под каждым куратором

## Конфигурация

Отредактируй `config/settings.py`:
- `BOT_TOKEN` - Telegram Bot API Token
- `GROUPS` - ID групп для отправки сообщений
- `ADMIN_ID` - ID администратора (опционально)

## Формат номеров телефонов

Бот работает с номерами Кыргызстана в формате:
- **+996XXXXXXXXX** (международный формат, например: +996701234567)
- **0XXXXXXXXXX** (местный формат, например: 0701234567)

Оба формата автоматически приводятся к стандартному виду +996XXXXXXXXX

## Примечания

- Все фото скачиваются и сохраняются локально
- Данные пользователя сохраняются в JSON (счетчики) и текстовые файлы
- Команда `/getfile` создает ZIP архив всех данных
- Бот поддерживает номера телефонов Кыргызстана (+996 или 0)
